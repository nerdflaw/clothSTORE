<!-- including admin head -->
<%- include('../../partials/admin-partials/admin-head.ejs') %>

<body>

  <!-- including admin nav -->
  <%- include('../../partials/admin-partials/admin-nav.ejs') %>

  <% if (order?.length > 0) { %>
  <section>
    <div class="container-fluid">
      <form action="/sales-report" method="post">
        <div class="row m-0 p-0 border rounded-3 my-3 table-responsive-md">
          <h6 class="text-primary p-3 m-0 border-bottom">Sales Report</h6>
          <div class="row m-0 p-3 ">
            <table class="table table-hover">
              <thead>
                <tr class="font-size" style="vertical-align: middle;">
                  <th class="text-white font-size-small bg-black text-center">No.</th>
                  <th class="text-white font-size-small bg-black text-center">Order ID</th>
                  <th class="text-white font-size-small bg-black text-center">MRP</th>
                  <th class="text-white font-size-small bg-black text-center">Tax Rate</th>
                  <th class="text-white font-size-small bg-black text-center">Before Tax</th>
                  <th class="text-white font-size-small bg-black text-center">GST</th>
                  <th class="text-white font-size-small bg-black text-center">SGST</th>
                  <th class="text-white font-size-small bg-black text-center">CGST</th>
                  <th class="text-white font-size-small bg-black text-center">Disc. %</th>
                  <th class="text-white font-size-small bg-black text-center">Disc. Amt.</th>
                  <th class="text-white font-size-small bg-black text-center">Coupon Disc.</th>
                  <th class="text-white font-size-small bg-black text-center">Coupon Name</th>
                  <th class="text-white font-size-small bg-black text-center">Coupon Disc. Amt.</th>
                  <th class="text-white font-size-small bg-black text-center">Totat Disc. Amt.</th>
                  <th class="text-white font-size-small bg-black text-center">Totat Disc. %</th>
                  <th class="text-white font-size-small bg-black text-center">Total</th>
                </tr>
              </thead>
              <tbody class="table-group-divider">
                <% order.forEach((element, index) => { %>
                <tr class="font-size">
                  <td class="text-black table-white font-size-small text-start"><%= index + 1 %></td>
                  <% const orderID = "clothSTORE_" + element?._id.toString().slice(-8); %>
                  <td class="text-black table-white font-size-small text-start"><%= orderID %></td>
                  <td class="text-black table-white font-size-small text-end"><%= element?.mrp?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small text-end">18 %</td>
                  <td class="text-black table-white font-size-small text-end"><%= element?.mrpWithoutTax?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small text-end"><%= element?.gst?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small text-end"><%= element?.sgst?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small text-end"><%= element?.cgst?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small text-end"><%= element?.discount?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small text-end"><%= element?.firstDiscountAmount?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small text-end"><%= element?.couponValue?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small text-start text-truncate"><%= element?.couponName?element?.couponName.split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()).join(' ') : 'Nill'  %></td>
                  <td class="text-black table-white font-size-small text-end"><%= element?.seccondDiscountAmount?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small text-end"><%= element?.totalDicount?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small text-end"><%= element?.totalDiscountPercentage?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small-bold text-end"><%= element?.totalPrice?.toFixed(2)  %></td>
                </tr>
                <% }) %>
                <tr class="font-size">
                  <td class="text-black table-white font-size-small-bold text-start"></td>
                  <td class="text-black table-white font-size-small-bold text-start">Total : </td>
                  <td class="text-black table-white font-size-small-bold text-end"><%= totalIndividualTotal?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small-bold text-start"></td>
                  <td class="text-black table-white font-size-small-bold text-end"><%= totalMrpWithoutTax?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small-bold text-end"><%= totalGst?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small-bold text-end"><%= totalCgst?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small-bold text-end"><%= totalSgst?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small-bold text-start"></td>
                  <td class="text-black table-white font-size-small-bold text-end"><%= totalFirstDiscountAmount?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small-bold text-start"></td>
                  <td class="text-black table-white font-size-small-bold text-start"></td>
                  <td class="text-black table-white font-size-small-bold text-end"><%= totalSeccondDiscountAmount?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small-bold text-end"><%= totalDiscountPercentage?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small-bold text-end"><%= totalDiscount?.toFixed(2) %></td>
                  <td class="text-black table-white font-size-small-bold text-end"><%= grandTotal?.toFixed(2) %></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </form>
    </div>
  </section>
  <% } %>
</body>

</html>
